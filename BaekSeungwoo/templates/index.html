<!Doctype html>
<html lang="ko">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>

    <!-- 구글폰트 -->
    <link href="https://fonts.googleapis.com/css?family=Stylish&display=swap" rel="stylesheet">
    <script defer src="https://use.fontawesome.com/releases/v6.4.0/js/all.js"></script>
    <title>정글그램</title>

    <!-- style -->
    <style type="text/css">
        * {
            font-family: "Stylish", sans-serif;
        }

        #edit-body{
            margin-bottom: 16px;
        }

        #version_check {
            background-color: gray;
            color: white;
        }


        .wrap {
            width: 900px;
            margin: auto;
        }
    </style>
    <script>
        $(document).ready(function () {
            const form = document.getElementById("user_form");
            form.addEventListener("submit", addUser)
        });  
               
        function addUser(e) {
            e.preventDefault();

            let name = $("#user_name");
            let age = $("#user_age");
            let mbti = $("#user_mbti");
            let hobby = $("#user_hobby");
            let rgb = $("#user_rgb");
            let content = $("#user_content");
            $.ajax({
                type: "POST",
                url: "/insert",
                data: { name: name.val(), age: age.val(), mbti: mbti.val(), hobby: hobby.val(), rgb: rgb.val(), content: content.val() },
                success: function (response) {
                    if (response['result'] == 'success') {
                        alert('포스팅 성공!')
                        title.val("")
                        content.val("")
                        showMemos()
                    } else {
                        alert('포스팅 실패ㅠㅠ')
                    }
                }
            });
        }

        function showUser(id){
            $.ajax({
                type: "POST",
                url: "/user",
                data: { id: id },
                success: function (response) {
                }
            });
        }
    
    </script>

</head>

<body>
    <div class="wrap">
        <div class="jumbotron">
            <h1 class="display-4">정글그램</h1>
            <p class="lead">
            <form id="user_form">
                <input id="user_name" name="title" class="form-control" placeholder="이름을 입력하세요">
                <input id="user_age" name="title" class="form-control" placeholder="나이를 입력하세요">
                <input id="user_mbti" name="title" class="form-control" placeholder="MBTI를 입력하세요">
                <input id="user_hobby" name="title" class="form-control" placeholder="취미를 입력하세요">
                <input id="user_rgb" name="title" class="form-control" placeholder="RGB 코드를 입력하세요">     
                <textarea id="user_content" name="content" class="form-control" rows="2"
                    placeholder="자기소개를 입력하세요"></textarea>
                <button type="submit" class="btn btn-primary">저장하기
                </button>
            </form>
            </p>
        </div>

        <div id="card-list" class="card-columns">
            {% for user in users%}
                <form action="user" method="POST">
                    <div class="card">
                        <div class="card-body">
                            <h2>{{user['name']}}</h2>
                            <h2>{{user['age']}}</h2>
                            <h2>{{user['mbti']}}</h2>
                            <button name="id" value="{{user['_id']}}">asd</button>
                        </div>
                    </div>
                </form>
            {% endfor %}
        </div>
    </div>
</body>

</html>