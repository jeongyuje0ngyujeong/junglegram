<!DOCTYPE html>
<html lang="ko">
    <head>
        <!-- JS -->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

        <script>
            src = 'https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js';
            crossorigin = 'anonymous';
        </script>

        <!-- 나홀로 메모장 to 정글 그램 수정 -->
        <title>정글 그램</title>

        <!-- style -->
        <style type="text/css">
            * {
                font-family: 'Stylish', sans-serif;
            }

            .wrap {
                width: 500px;
                margin: auto;
            }

            .comment {
                color: blue;
                font-weight: bold;
            }

            #post-box {
                width: 450px;
                margin: auto;
                padding: 5px;
                border: black solid;
                border-radius: 5px;
            }
        </style>
        <script>
            function openRegister() {
                $('#Register-box').show();
            }

            function signup() {
                console.log($('#register-id').val());
                $.ajax({
                    type: 'POST',
                    url: '/users/register',
                    data: {
                        id_give: $('#register-id').val(),
                        pw_give: $('#register-password').val(),
                    },
                    success: function (response) {
                        if (response.result === 'success') {
                            alert('회원가입이 완료되었습니다.');
                            window.location.href = '/';
                        } else {
                            alert('ID 중복 미확인');
                        }
                    },
                    error: function () {
                        alert('서버 오류!');
                    },
                });
            }

            function checkId() {
                $.ajax({
                    type: 'GET',
                    url: '/users/check_id',
                    data: { id_give: $('#register-id').val() },
                    success: function (response) {
                        if (response.result === 'success') {
                            alert('사용 가능한 ID입니다.');
                        } else {
                            alert('이미 사용 중인 ID입니다.');
                        }
                    },
                    error: function () {
                        alert('서버 오류!');
                    },
                });
            }

            function login() {
                $.ajax({
                    type: 'GET',
                    url: '/users/login',
                    data: { id: $('#login-id').val(), pw: $('#login-password').val() },
                    success: function (response) {
                        if (response.result === 'success') {
                            alert(response.message);
                        } else {
                            alert('ID 없다');
                        }
                    },
                    error: function () {
                        alert('서버 오류!');
                    },
                });
            }
        </script>
    </head>

    <body>
        <div class="wrap">
            <div>
                <h1>정글 그램</h1>
                <p>중요한 링크를 저장해두고, 나중에 볼 수 있는 공간입니다</p>

                <!-- 계정 입력부분 (로그인) -->
                <div>
                    <!-- 아이디 (로그인) -->
                    <div>
                        <label for="login-id">ID</label>
                        <input id="login-id" class="form-control" placeholder="" />
                    </div>

                    <!-- 비밀번호 (로그인) -->
                    <div>
                        <label for="login-password">PassWord</label>
                        <input type="password" id="login-password" class="form-control" />
                    </div>

                    <!-- 로그인 -->
                    <p>
                        <button onclick="login()" type="button">로그인</button>
                    </p>

                    <!-- 회원가입버튼 -->
                    <p>
                        <button onclick="openRegister()" type="button">회원가입</button>
                    </p>
                </div>

                <hr />
                <!-- 구분선 -->
            </div>

            <div id="Register-box" class="form-post" style="display: none">
                <div>
                    <!-- 아이디 -->
                    <div>
                        <label for="register-id">ID</label>
                        <input id="register-id" class="form-control" placeholder="" />
                    </div>

                    <!-- 중복확인 -->
                    <div>
                        <button type="button" onclick="checkId()">중복확인</button>
                    </div>
                    <!-- 비밀번호 -->

                    <div>
                        <label for="register-password">PassWord</label>
                        <input type="password" id="register-password" class="form-control" />
                    </div>

                    <!-- 가입버튼 -->
                    <button type="button" onclick="signup()">가입</button>
                </div>
            </div>
        </div>
    </body>
</html>
